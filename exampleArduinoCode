const int buzzer = 5;
const int songspeed = 1;
#define BLYNK_PRINT Serial
#include <SPI.h>
#include <WiFiNINA.h>
#include <BlynkSimpleWiFiNINA.h>
#include "arduino_secrets.h" 
char auth[] = AUTH_TOKEN;
char ssid[] = SECRET_SSID;
char pass[] = SECRET_PASS;
int pinV0 = 0;
int notes[] = {1046,988,880,784,880,988,1046,1175,988,1046,784,880,988,1046,880,988,784,1046,988,1046,1175,1319,1046,1568,1397,1319,1175,1046,1568,1397,1319,1175,1046,988,1046,880,1319,880,1319,1319,880,1046,988,1046,880,988,1046,1175,1046,1175,988,1046,1319,1175,1046,988,880,1046,1175,1319,1175,1046,988,1046,880,988,784,880,988,1046,784,880,988,1046,880,988,784,1046,988,1046,1175,1319,1046,1568,1397,1319,1175,1046,1568,1397,1319,1175,1046,988,1046,880,1319,880,1319,1319,880,1046,988,1046,880,988,1046,1175,1046,1175,988,104};
int duration[] = {250,250,250,250,250,250,250,250,250,500,250,250,250,250,250,250,250,250,250,250,500,250,250,250,250,500,250,250,250,250,500,250,250,250,250,500,250,250,250,250,750,250,250,250,250,250,250,125,125,250,250,750,250,250,250,500,250,500,250,500,250,250,250,250,500,250,250,250,250,500,250,250,250,250,250,250,250,250,250,250,500,250,250,250,250,500,250,250,250,250,500,250,250,250,250,500,250,250,250,250,750,250,250,250,250,250,250,125,125,250,250,75};
void setup() {
   Serial.begin(9600);
   Blynk.begin(auth, ssid, pass);
}
BLYNK_WRITE(V0) {
   Serial.println(param.asInt());
   pinV0 = param.asInt();
}
void loop() {
   int elementCount = sizeof(notes) / sizeof(int);

   for (int i=0;i<elementCount;i++){
       int wait = duration[i] * songspeed;
       Blynk.run();
       if(pinV0<100){
           tone(buzzer,notes[i],wait);
           delay(wait);
       } else {
           i--;
           delay(1000);
       }
   }
}
